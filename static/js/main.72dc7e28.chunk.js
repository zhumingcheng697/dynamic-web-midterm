(this.webpackJsonpmidterm=this.webpackJsonpmidterm||[]).push([[0],{35:function(e,t,a){e.exports=a(77)},40:function(e,t,a){},41:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(33),o=a.n(c),r=(a(40),a(14)),i=a(1),s=(a(41),a(7)),m=a(12),u=a.n(m),d=a(15);var g=function(){return l.a.createElement("div",{className:"Loading"},l.a.createElement("div",{className:"LoadingRing"},l.a.createElement("div",{className:"LoadingMask"})),l.a.createElement("h3",{className:"centered"},"Loading..."))};var h=function(e){var t=e.name;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"Title"},l.a.createElement("h1",null,"COVID ",l.a.createElement("span",null,"|")," Headline"),l.a.createElement("nav",null,l.a.createElement("a",{href:"./?country=US"},"US"),l.a.createElement("a",{href:"./?country=GB"},"UK"),l.a.createElement("a",{href:"./?country=CN"},"China"),l.a.createElement("a",{href:"./?country=RU"},"Russia"),l.a.createElement("a",{href:"./?country=JP"},"Japan"))),t?l.a.createElement("h2",{className:"Subtitle"},"Latest COVID\u201119 Statistics and Top Headlines in"," ",l.a.createElement("span",null,t)):l.a.createElement("h2",{className:"Subtitle"},"Latest COVID\u201119 Statistics and Top Headlines"))};var E=function(e){var t=e.data,a=e.locale;if(t){var n=t.latest_data.deaths/t.latest_data.confirmed,c=t.latest_data.recovered/t.latest_data.confirmed,o=1-n-c;return l.a.createElement("section",{className:"Stats"},l.a.createElement("div",{className:"NumberRow"},l.a.createElement("div",null,l.a.createElement("h4",null,"Cases"),l.a.createElement("p",{className:"Total"},t.latest_data.confirmed.toLocaleString(a)," Total"),t.today.confirmed||t.today.deaths?l.a.createElement("p",{className:"Today"},"+",t.today.confirmed.toLocaleString(a)," Today"):null),l.a.createElement("div",null,l.a.createElement("h4",null,"Deaths"),l.a.createElement("p",{className:"Total"},t.latest_data.deaths.toLocaleString(a)," Total"),t.today.confirmed||t.today.deaths?l.a.createElement("p",{className:"Today"},"+",t.today.deaths.toLocaleString(a)," Today"):null)),l.a.createElement("div",{className:"PercentageRow"},l.a.createElement("div",null,l.a.createElement("h4",null,"Active"),l.a.createElement("p",null,o.toLocaleString(a,{style:"percent",maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement("h4",null,"Fatality"),l.a.createElement("p",null,n.toLocaleString(a,{style:"percent",maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement("h4",null,"Recovered"),l.a.createElement("p",null,c.toLocaleString(a,{style:"percent",maximumFractionDigits:2})))),l.a.createElement("p",{className:"UpdatedAt"},"Updated at"," ",l.a.createElement("span",null,new Date(t.updated_at).toLocaleString(a,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"}))))}return null};var p=function(e){var t=e.data,a=e.locale;return t?l.a.createElement("a",{href:t.url,className:"Article"},l.a.createElement("div",{className:"ArticleInfo".concat(t.urlToImage?"":" no-image")},l.a.createElement("h4",null,t.title),t.description&&!t.description.includes("\ufffd")?l.a.createElement("p",null,t.description):null,l.a.createElement("p",{className:"ArticleDate"},new Date(t.publishedAt).toLocaleDateString(a,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}))),t.urlToImage?l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{className:"ArticleImg",src:t.urlToImage,alt:t.title,onLoad:function(e){e.target.parentNode.lastChild.style.backgroundImage||(e.target.parentNode.firstChild.classList.add("no-image"),e.target.parentNode.lastChild.style.display="none",e.target.style.display="none")},onError:function(e){e.target.parentNode.firstChild.classList.add("no-image"),e.target.parentNode.lastChild.style.display="none",e.target.style.display="none"}}),l.a.createElement("div",{className:"ArticleImgContainer",style:{backgroundImage:"url(".concat(t.urlToImage,")")}})):null):null};var f=function(){var e=Object(i.f)(),t=Object(n.useState)(new URLSearchParams(e.location.search).get("country")||""),a=Object(s.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)(null),m=Object(s.a)(r,2),f=m[0],y=m[1],v=Object(n.useState)(!1),b=Object(s.a)(v,2),N=b[0],S=b[1],O=Object(n.useState)([]),j=Object(s.a)(O,2),C=j[0],L=j[1],T=Object(n.useState)(!1),U=Object(s.a)(T,2),w=U[0],F=U[1],A=Object(n.useState)(!1),I=Object(s.a)(A,2),R=I[0],D=I[1],k=Object(n.useState)(!1),_=Object(s.a)(k,2),P=_[0],B=_[1],J=Object(n.useState)(!1),x=Object(s.a)(J,2),H=x[0],M=x[1],G=Object(n.useState)(!1),K=Object(s.a)(G,2),V=K[0],W=K[1],z=Object(n.useState)(null),Y=Object(s.a)(z,2),Z=Y[0],$=Y[1],q=Object(n.useState)(!1),Q=Object(s.a)(q,2),X=Q[0],ee=Q[1];function te(){var e=d.getCountryByAlpha2(c.toUpperCase());return e&&e.languages&&e.languages[0]||void 0}return Object(n.useEffect)((function(){document.addEventListener("scroll",(function(){var e=document.documentElement.scrollHeight-document.documentElement.clientHeight-document.documentElement.scrollTop;isFinite(e)&&e<1&&D(!0)})),console.log("scroll listner added")}),[]),Object(n.useEffect)((function(){c||u.a.get("https://ipapi.co/json").then((function(e){console.log(e.data.country_code),o(e.data.country_code)})).catch((function(e){console.log(e),o("US")}))}),[c,e]),Object(n.useEffect)((function(){c&&u.a.get("https://corona-api.com/countries/".concat(c)).then((function(e){var t=e.data.data;console.log(t),delete t.timeline,y(t);var a=Math.log2(t.latest_data.deaths/t.population*1e6+1),n=Math.max(140-13.5*a,0);document.documentElement.style.setProperty("--light-accent-color","hsl(".concat(n,", 76%, 60%)")),document.documentElement.style.setProperty("--dark-accent-color","hsl(".concat(n,", 66%, 45%)"))})).catch((function(e){console.warn(e)})).finally((function(){S(!0)}))}),[c,e]),Object(n.useEffect)((function(){if(c&&(R||C.length<1)&&!H&&!P){B(!0),D(!1);var e=Math.ceil(C.length/20)+1;console.log(e),u.a.get("https://newsapi.org/v2/top-headlines?country=".concat(c,"&pageSize=").concat(20,"&page=").concat(e,"&apiKey=").concat("53829b214ce547fcb3d42c19d97038f2")).then((function(e){console.log(e.data.articles),(e.data.articles.length<20||e.data.totalResults<=C.length+e.data.articles.length)&&M(!0),L(C.concat(e.data.articles))})).catch((function(e){console.warn(e),M(!0)})).finally((function(){F(!0),B(!1)}))}else D(!1)}),[c,e,R]),Object(n.useEffect)((function(){setTimeout((function(){N&&w&&document.body.classList.add("Loaded"),ee(N&&w)}),0)}),[N,w]),Object(n.useEffect)((function(){if(X){var e=!f&&c&&!["US","GB","CN","RU","JP"].includes(c.toUpperCase())&&X;e&&null===Z&&$(5),W(e)}}),[f,c,X,Z]),Object(n.useEffect)((function(){V&&(Z>1&&setTimeout((function(){$(Z-1)}),1e3),5===Z&&setTimeout((function(){e.push("./"),o(""),y(null),S(!1),L([]),F(!1),D(!1),B(!1),M(!1),W(!1),$(null),ee(!1)}),5e3))}),[V,Z,e]),l.a.createElement(l.a.Fragment,null,l.a.createElement(g,null),X?l.a.createElement(l.a.Fragment,null,l.a.createElement(h,{name:f?c&&d.getCountryNameByAlpha2(c.toUpperCase())||f.name:""}),l.a.createElement("main",null,f?l.a.createElement(l.a.Fragment,null,l.a.createElement(E,{data:f,locale:void 0}),l.a.createElement("div",{className:"Articles"},C.map((function(e,t){return l.a.createElement(p,{key:t,data:e,locale:te()})}))),C.length>0&&H?l.a.createElement("h3",{className:"centered AllLoaded"},"All Top Headlines Loaded"):null):V?l.a.createElement("h3",{className:"centered"},"No Statistics Found For ",c.toUpperCase(),". Redirecting in"," ",Z," Seconds."):l.a.createElement("h3",{className:"centered"},"No Statistics Found For"," ",["United States","United Kingdom","China","Russian Federation","Japan"][["US","GB","CN","RU","JP"].indexOf(c.toUpperCase())]||c,". Please Check Your Connection."))):null)};var y=function(){return l.a.createElement(r.a,null,l.a.createElement(i.c,null,l.a.createElement(i.a,{path:"/"},l.a.createElement(f,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.72dc7e28.chunk.js.map