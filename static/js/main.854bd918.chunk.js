(this.webpackJsonpmidterm=this.webpackJsonpmidterm||[]).push([[0],{35:function(e,t,a){e.exports=a(77)},40:function(e,t,a){},41:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(33),o=a.n(l),r=(a(40),a(9)),i=a(1),s=(a(41),a(3)),u=a(13),m=a.n(u),d=a(14);var h=function(){return c.a.createElement("div",{className:"Loading"},c.a.createElement("div",{className:"LoadingRing"},c.a.createElement("div",{className:"LoadingMask"})),c.a.createElement("h3",{className:"centered"},"Loading..."))};var E=function(e){var t=e.name,a=e.resetCountry;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"Title"},c.a.createElement(r.b,{to:"./",onClick:a},c.a.createElement("h1",null,"COVID ",c.a.createElement("span",null,"|")," Headline")),c.a.createElement("nav",null,c.a.createElement(r.b,{to:"./?country=US",onClick:a},"US"),c.a.createElement(r.b,{to:"./?country=GB",onClick:a},"UK"),c.a.createElement(r.b,{to:"./?country=CN",onClick:a},"China"),c.a.createElement(r.b,{to:"./?country=RU",onClick:a},"Russia"),c.a.createElement(r.b,{to:"./?country=JP",onClick:a},"Japan"))),t?c.a.createElement("h2",{className:"Subtitle"},"Latest COVID\u201119 Statistics and Top Headlines in"," ",c.a.createElement("span",null,t)):c.a.createElement("h2",{className:"Subtitle"},"Latest COVID\u201119 Statistics and Top Headlines"))};var f=function(e){var t=e.data,a=e.locale;if(t){var n=t.latest_data.deaths/t.latest_data.confirmed,l=t.latest_data.recovered/t.latest_data.confirmed,o=1-n-l;return c.a.createElement("section",{className:"Stats"},c.a.createElement("div",{className:"NumberRow"},c.a.createElement("div",null,c.a.createElement("h4",null,"Cases"),c.a.createElement("p",{className:"Total"},t.latest_data.confirmed.toLocaleString(a)," Total"),t.today.confirmed||t.today.deaths?c.a.createElement("p",{className:"Today"},"+",t.today.confirmed.toLocaleString(a)," Today"):null),c.a.createElement("div",null,c.a.createElement("h4",null,"Deaths"),c.a.createElement("p",{className:"Total"},t.latest_data.deaths.toLocaleString(a)," Total"),t.today.confirmed||t.today.deaths?c.a.createElement("p",{className:"Today"},"+",t.today.deaths.toLocaleString(a)," Today"):null)),c.a.createElement("div",{className:"PercentageRow"},c.a.createElement("div",null,c.a.createElement("h4",null,"Active"),c.a.createElement("p",null,o.toLocaleString(a,{style:"percent",maximumFractionDigits:2}))),c.a.createElement("div",null,c.a.createElement("h4",null,"Fatality"),c.a.createElement("p",null,n.toLocaleString(a,{style:"percent",maximumFractionDigits:2}))),c.a.createElement("div",null,c.a.createElement("h4",null,"Recovered"),c.a.createElement("p",null,l.toLocaleString(a,{style:"percent",maximumFractionDigits:2})))),c.a.createElement("p",{className:"UpdatedAt"},"Last updated at"," ",c.a.createElement("span",null,new Date(t.updated_at).toLocaleString(a,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"}))))}return null};var g=function(e){var t=e.data,a=e.locale;return t?c.a.createElement("a",{href:t.url,className:"Article"},c.a.createElement("div",{className:"ArticleInfo".concat(t.urlToImage?"":" no-image")},c.a.createElement("h4",null,t.title),t.description&&!t.description.includes("\ufffd")?c.a.createElement("p",null,t.description):null,c.a.createElement("p",{className:"ArticleDate"},new Date(t.publishedAt).toLocaleDateString(a,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}))),t.urlToImage?c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{className:"ArticleImg",src:t.urlToImage,alt:t.title,onLoad:function(e){e.target.parentNode.lastChild.style.backgroundImage||(e.target.parentNode.firstChild.classList.add("no-image"),e.target.parentNode.lastChild.style.display="none",e.target.style.display="none")},onError:function(e){e.target.parentNode.firstChild.classList.add("no-image"),e.target.parentNode.lastChild.style.display="none",e.target.style.display="none"}}),c.a.createElement("div",{className:"ArticleImgContainer",style:{backgroundImage:"url(".concat(t.urlToImage,")")}})):null):null};var p=function(){var e=Object(i.f)(),t=Object(n.useState)(new URLSearchParams(e.location.search).get("country")||""),a=Object(s.a)(t,2),l=a[0],o=a[1],r=Object(n.useState)(null),u=Object(s.a)(r,2),p=u[0],y=u[1],b=Object(n.useState)(!1),v=Object(s.a)(b,2),S=v[0],N=v[1],O=Object(n.useState)(null),L=Object(s.a)(O,2),j=L[0],C=L[1],T=Object(n.useState)(null),w=Object(s.a)(T,2),U=w[0],k=w[1],A=Object(n.useState)([]),D=Object(s.a)(A,2),F=D[0],I=D[1],P=Object(n.useState)(!1),R=Object(s.a)(P,2),_=R[0],B=R[1],x=Object(n.useState)(!1),H=Object(s.a)(x,2),J=H[0],M=H[1],G=Object(n.useState)(!1),K=Object(s.a)(G,2),V=K[0],W=K[1],z=Object(n.useState)(!1),Y=Object(s.a)(z,2),Z=Y[0],$=Y[1],q=Object(n.useState)(!1),Q=Object(s.a)(q,2),X=Q[0],ee=Q[1],te=Object(n.useState)(null),ae=Object(s.a)(te,2),ne=ae[0],ce=ae[1],le=Object(n.useState)(!1),oe=Object(s.a)(le,2),re=oe[0],ie=oe[1];function se(){var e=d.getCountryByAlpha2(l.toUpperCase());return e&&e.languages&&e.languages[0]||void 0}return Object(n.useEffect)((function(){function t(){C((function(e){return e&&new Date-e>=18e5?null:e}))}document.addEventListener("scroll",(function(){document.documentElement.scrollHeight-document.documentElement.clientHeight-document.documentElement.scrollTop<5&&(console.log("load more!"),M(!0)),t()})),document.addEventListener("mousemove",(function(){t()})),document.addEventListener("visibilitychange",(function(){document.hidden||t()})),window.addEventListener("focus",(function(){t()})),e.listen((function(){"POP"===e.action&&(document.body.classList.remove("Loaded"),setTimeout((function(){o("")}),1e3))}))}),[e]),Object(n.useEffect)((function(){if(y(null),N(!1),C(null),k(null),I([]),B(!1),M(!1),W(!1),$(!1),ee(!1),ce(null),ie(!1),!l){var t=new URLSearchParams(e.location.search).get("country");if(t)return void o(t);m.a.get("https://ipapi.co/json").then((function(e){o(e.data.country_code)})).catch((function(e){o("US")}))}}),[l]),Object(n.useEffect)((function(){l&&!j&&(clearTimeout(U),console.log("loading stats",new Date),m.a.get("https://corona-api.com/countries/".concat(l)).then((function(e){var t=e.data.data;delete t.timeline,y(t);var a=Math.log2(t.latest_data.deaths/t.population*1e6+1),n=Math.max(140-13.5*a,0);document.documentElement.style.setProperty("--light-accent-color","hsl(".concat(n,", 76%, 60%)")),document.documentElement.style.setProperty("--dark-accent-color","hsl(".concat(n,", 66%, 45%)"))})).catch((function(e){p||(document.documentElement.style.setProperty("--light-accent-color","#eee"),document.documentElement.style.setProperty("--dark-accent-color","black"))})).finally((function(){N(!0),C(new Date),k(setTimeout((function(){C(null)}),18e5))})))}),[l,j]),Object(n.useEffect)((function(){if(l&&(J||F.length<1)&&!Z&&!V){W(!0),M(!1);var e=Math.ceil(F.length/20)+1;console.log(e),m.a.get("https://cors-anywhere.herokuapp.com/https://newsapi.org/v2/top-headlines?country=".concat(l,"&pageSize=").concat(20,"&page=").concat(e,"&apiKey=").concat("53829b214ce547fcb3d42c19d97038f2"),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){(e.data.articles.length<20||e.data.totalResults<=F.length+e.data.articles.length)&&$(!0),I(F.concat(e.data.articles))})).catch((function(e){$(!0)})).finally((function(){B(!0),W(!1)}))}else M(!1)}),[l,J]),Object(n.useEffect)((function(){setTimeout((function(){S&&_&&document.body.classList.add("Loaded"),ie(S&&_)}),0)}),[S,_]),Object(n.useEffect)((function(){if(re){var e=!p&&l&&!["US","GB","CN","RU","JP"].includes(l.toUpperCase())&&re;e&&null===ne&&ce(5),ee(e)}}),[p,l,re,ne]),Object(n.useEffect)((function(){X&&5===ne&&(setTimeout((function(){setInterval((function(){ce((function(e){return e>1?e-1:1}))}),1e3)}),500),setTimeout((function(){document.body.classList.remove("Loaded"),setTimeout((function(){e.push("./"),o("")}),1e3)}),5e3))}),[X,ne,e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(h,null),re?c.a.createElement(c.a.Fragment,null,c.a.createElement(E,{name:p?l&&d.getCountryNameByAlpha2(l.toUpperCase())||p.name:"",resetCountry:function(){document.body.classList.remove("Loaded"),setTimeout((function(){o("")}),1e3)}}),c.a.createElement("main",null,p?c.a.createElement(c.a.Fragment,null,c.a.createElement(f,{data:p,locale:void 0}),c.a.createElement("section",{className:"Articles"},F.map((function(e,t){return c.a.createElement(g,{key:t,data:e,locale:se()})})),F.length>0&&Z?c.a.createElement("h3",{className:"centered AllLoaded"},"All Top Headlines Loaded"):F.length>0&&V?c.a.createElement("h3",{className:"centered AllLoaded"},"Loading More Headlines\u2026"):null)):X?c.a.createElement("h3",{className:"centered"},"No Statistics Found For"," ",l&&d.getCountryNameByAlpha2(l.toUpperCase())||l.toUpperCase(),". Redirecting in ",ne," Seconds."):c.a.createElement("h3",{className:"centered"},"No Statistics Found For"," ",["United States","United Kingdom","China","Russian Federation","Japan"][["US","GB","CN","RU","JP"].indexOf(l.toUpperCase())]||l,". Please Check Your Connection."))):null)};var y=function(){return c.a.createElement(r.a,null,c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/"},c.a.createElement(p,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.854bd918.chunk.js.map