(this.webpackJsonpmidterm=this.webpackJsonpmidterm||[]).push([[0],{35:function(e,t,a){e.exports=a(77)},40:function(e,t,a){},41:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(33),o=a.n(c),r=(a(40),a(15)),s=a(1),i=(a(41),a(3)),u=a(12),m=a.n(u),d=a(13);var h=function(){return l.a.createElement("div",{className:"Loading"},l.a.createElement("div",{className:"LoadingRing"},l.a.createElement("div",{className:"LoadingMask"})),l.a.createElement("h3",{className:"centered"},"Loading..."))};var g=function(e){var t=e.name;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"Title"},l.a.createElement("a",{href:"./"},l.a.createElement("h1",null,"COVID ",l.a.createElement("span",null,"|")," Headline")),l.a.createElement("nav",null,l.a.createElement("a",{href:"./?country=US"},"US"),l.a.createElement("a",{href:"./?country=GB"},"UK"),l.a.createElement("a",{href:"./?country=CN"},"China"),l.a.createElement("a",{href:"./?country=RU"},"Russia"),l.a.createElement("a",{href:"./?country=JP"},"Japan"))),t?l.a.createElement("h2",{className:"Subtitle"},"Latest COVID\u201119 Statistics and Top Headlines in"," ",l.a.createElement("span",null,t)):l.a.createElement("h2",{className:"Subtitle"},"Latest COVID\u201119 Statistics and Top Headlines"))};var f=function(e){var t=e.data,a=e.locale;if(t){var n=t.latest_data.deaths/t.latest_data.confirmed,c=t.latest_data.recovered/t.latest_data.confirmed,o=1-n-c;return l.a.createElement("section",{className:"Stats"},l.a.createElement("div",{className:"NumberRow"},l.a.createElement("div",null,l.a.createElement("h4",null,"Cases"),l.a.createElement("p",{className:"Total"},t.latest_data.confirmed.toLocaleString(a)," Total"),t.today.confirmed||t.today.deaths?l.a.createElement("p",{className:"Today"},"+",t.today.confirmed.toLocaleString(a)," Today"):null),l.a.createElement("div",null,l.a.createElement("h4",null,"Deaths"),l.a.createElement("p",{className:"Total"},t.latest_data.deaths.toLocaleString(a)," Total"),t.today.confirmed||t.today.deaths?l.a.createElement("p",{className:"Today"},"+",t.today.deaths.toLocaleString(a)," Today"):null)),l.a.createElement("div",{className:"PercentageRow"},l.a.createElement("div",null,l.a.createElement("h4",null,"Active"),l.a.createElement("p",null,o.toLocaleString(a,{style:"percent",maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement("h4",null,"Fatality"),l.a.createElement("p",null,n.toLocaleString(a,{style:"percent",maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement("h4",null,"Recovered"),l.a.createElement("p",null,c.toLocaleString(a,{style:"percent",maximumFractionDigits:2})))),l.a.createElement("p",{className:"UpdatedAt"},"Last updated at"," ",l.a.createElement("span",null,new Date(t.updated_at).toLocaleString(a,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"}))))}return null};var p=function(e){var t=e.data,a=e.locale;return t?l.a.createElement("a",{href:t.url,className:"Article"},l.a.createElement("div",{className:"ArticleInfo".concat(t.urlToImage?"":" no-image")},l.a.createElement("h4",null,t.title),t.description&&!t.description.includes("\ufffd")?l.a.createElement("p",null,t.description):null,l.a.createElement("p",{className:"ArticleDate"},new Date(t.publishedAt).toLocaleDateString(a,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}))),t.urlToImage?l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{className:"ArticleImg",src:t.urlToImage,alt:t.title,onLoad:function(e){e.target.parentNode.lastChild.style.backgroundImage||(e.target.parentNode.firstChild.classList.add("no-image"),e.target.parentNode.lastChild.style.display="none",e.target.style.display="none")},onError:function(e){e.target.parentNode.firstChild.classList.add("no-image"),e.target.parentNode.lastChild.style.display="none",e.target.style.display="none"}}),l.a.createElement("div",{className:"ArticleImgContainer",style:{backgroundImage:"url(".concat(t.urlToImage,")")}})):null):null};var E=function(){var e=Object(s.f)(),t=Object(n.useState)(new URLSearchParams(e.location.search).get("country")||""),a=Object(i.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)(null),u=Object(i.a)(r,2),E=u[0],y=u[1],b=Object(n.useState)(!1),v=Object(i.a)(b,2),N=v[0],S=v[1],O=Object(n.useState)(null),j=Object(i.a)(O,2),L=j[0],C=j[1],w=Object(n.useState)(null),T=Object(i.a)(w,2),U=T[0],A=T[1],F=Object(n.useState)([]),I=Object(i.a)(F,2),D=I[0],R=I[1],k=Object(n.useState)(!1),_=Object(i.a)(k,2),B=_[0],P=_[1],x=Object(n.useState)(!1),H=Object(i.a)(x,2),J=H[0],M=H[1],G=Object(n.useState)(!1),K=Object(i.a)(G,2),V=K[0],W=K[1],z=Object(n.useState)(!1),Y=Object(i.a)(z,2),Z=Y[0],$=Y[1],q=Object(n.useState)(!1),Q=Object(i.a)(q,2),X=Q[0],ee=Q[1],te=Object(n.useState)(null),ae=Object(i.a)(te,2),ne=ae[0],le=ae[1],ce=Object(n.useState)(!1),oe=Object(i.a)(ce,2),re=oe[0],se=oe[1];function ie(){var e=d.getCountryByAlpha2(c.toUpperCase());return e&&e.languages&&e.languages[0]||void 0}return Object(n.useEffect)((function(){document.addEventListener("scroll",(function(){var e=document.documentElement.scrollHeight-document.documentElement.clientHeight-document.documentElement.scrollTop;isFinite(e)&&e<5&&(console.log("load!"),M(!0))})),window.addEventListener("focus",(function(){console.log("focus!"),C((function(e){return e&&new Date-e>=18e5?null:e}))}))}),[]),Object(n.useEffect)((function(){c||m.a.get("https://ipapi.co/json").then((function(e){console.log(e.data.country_code),o(e.data.country_code)})).catch((function(e){console.log(e),o("US")}))}),[c,e]),Object(n.useEffect)((function(){!c||L&&E||(clearTimeout(U),m.a.get("https://corona-api.com/countries/".concat(c)).then((function(e){var t=e.data.data;console.log(t),delete t.timeline,y(t),C(new Date),A(setTimeout((function(){console.log("auto-refresh"),C(null)}),18e5));var a=Math.log2(t.latest_data.deaths/t.population*1e6+1),n=Math.max(140-13.5*a,0);document.documentElement.style.setProperty("--light-accent-color","hsl(".concat(n,", 76%, 60%)")),document.documentElement.style.setProperty("--dark-accent-color","hsl(".concat(n,", 66%, 45%)"))})).catch((function(e){console.warn(e)})).finally((function(){S(!0)})))}),[c,e,L]),Object(n.useEffect)((function(){if(c&&(J||D.length<1)&&!Z&&!V){W(!0),M(!1);var e=Math.ceil(D.length/20)+1;console.log(e),m.a.get("https://cors-anywhere.herokuapp.com/https://newsapi.org/v2/top-headlines?country=".concat(c,"&pageSize=").concat(20,"&page=").concat(e,"&apiKey=").concat("53829b214ce547fcb3d42c19d97038f2"),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){console.log(e.data.articles),(e.data.articles.length<20||e.data.totalResults<=D.length+e.data.articles.length)&&$(!0),R(D.concat(e.data.articles))})).catch((function(e){console.warn(e),$(!0)})).finally((function(){P(!0),W(!1)}))}else M(!1)}),[c,e,J]),Object(n.useEffect)((function(){setTimeout((function(){N&&B&&document.body.classList.add("Loaded"),se(N&&B)}),0)}),[N,B]),Object(n.useEffect)((function(){if(re){var e=!E&&c&&!["US","GB","CN","RU","JP"].includes(c.toUpperCase())&&re;e&&null===ne&&le(5),ee(e)}}),[E,c,re,ne]),Object(n.useEffect)((function(){X&&5===ne&&(setTimeout((function(){setInterval((function(){le((function(e){return e>1?e-1:1}))}),1e3)}),500),setTimeout((function(){document.body.classList.remove("Loaded"),setTimeout((function(){e.push("./"),o(""),y(null),S(!1),C(null),A(null),R([]),P(!1),M(!1),W(!1),$(!1),ee(!1),le(null),se(!1)}),1e3)}),5e3))}),[X,ne,e]),l.a.createElement(l.a.Fragment,null,l.a.createElement(h,null),re?l.a.createElement(l.a.Fragment,null,l.a.createElement(g,{name:E?c&&d.getCountryNameByAlpha2(c.toUpperCase())||E.name:""}),l.a.createElement("main",null,E?l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{data:E,locale:void 0}),l.a.createElement("section",{className:"Articles"},D.map((function(e,t){return l.a.createElement(p,{key:t,data:e,locale:ie()})})),D.length>0&&Z?l.a.createElement("h3",{className:"centered AllLoaded"},"All Top Headlines Loaded"):D.length>0&&V?l.a.createElement("h3",{className:"centered AllLoaded"},"Loading More Headlines\u2026"):null)):X?l.a.createElement("h3",{className:"centered"},"No Statistics Found For"," ",c&&d.getCountryNameByAlpha2(c.toUpperCase())||c.toUpperCase(),". Redirecting in ",ne," Seconds."):l.a.createElement("h3",{className:"centered"},"No Statistics Found For"," ",["United States","United Kingdom","China","Russian Federation","Japan"][["US","GB","CN","RU","JP"].indexOf(c.toUpperCase())]||c,". Please Check Your Connection."))):null)};var y=function(){return l.a.createElement(r.a,null,l.a.createElement(s.c,null,l.a.createElement(s.a,{path:"/"},l.a.createElement(E,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.4b197b89.chunk.js.map