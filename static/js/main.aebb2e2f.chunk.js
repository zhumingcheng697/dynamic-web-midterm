(this.webpackJsonpmidterm=this.webpackJsonpmidterm||[]).push([[0],{37:function(e,t,a){e.exports=a(79)},42:function(e,t,a){},43:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(35),o=a.n(l),r=(a(42),a(9)),i=a(1),s=(a(43),a(11)),u=a(3),m=a(15),d=a.n(m),f=a(16);var h=function(){return c.a.createElement("div",{className:"Loading"},c.a.createElement("div",{className:"LoadingRing"},c.a.createElement("div",{className:"LoadingMask"})),c.a.createElement("h3",{className:"centered"},"Loading..."))};var p=function(e){var t=e.name,a=e.resetCountry;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"Title"},c.a.createElement(r.b,{to:"./",onClick:a},c.a.createElement("h1",null,"COVID ",c.a.createElement("span",null,"|")," Headline")),c.a.createElement("nav",null,c.a.createElement(r.b,{to:"./?country=US",onClick:a},"US"),c.a.createElement(r.b,{to:"./?country=GB",onClick:a},"UK"),c.a.createElement(r.b,{to:"./?country=CN",onClick:a},"China"),c.a.createElement(r.b,{to:"./?country=RU",onClick:a},"Russia"),c.a.createElement(r.b,{to:"./?country=JP",onClick:a},"Japan"))),t?c.a.createElement("h2",{className:"Subtitle"},"Latest COVID\u201119 Statistics and Top Headlines in"," ",c.a.createElement("span",null,t)):c.a.createElement("h2",{className:"Subtitle"},"Latest COVID\u201119 Statistics and Top Headlines"))};var E=function(e){var t=e.data,a=e.locale;try{var n=t.latest_data.deaths/t.latest_data.confirmed,l=t.latest_data.recovered/t.latest_data.confirmed,o=1-n-l;return c.a.createElement("section",{className:"Stats"},c.a.createElement("div",{className:"NumberRow"},c.a.createElement("div",null,c.a.createElement("h4",null,"Cases"),c.a.createElement("p",{className:"Total"},t.latest_data.confirmed.toLocaleString(a)," Total"),t.today&&(t.today.confirmed||t.today.deaths)?c.a.createElement("p",{className:"Today"},"+",(t.today.confirmed||0).toLocaleString(a)," ","Today"):null),c.a.createElement("div",null,c.a.createElement("h4",null,"Deaths"),c.a.createElement("p",{className:"Total"},t.latest_data.deaths.toLocaleString(a)," Total"),t.today&&(t.today.confirmed||t.today.deaths)?c.a.createElement("p",{className:"Today"},"+",(t.today.deaths||0).toLocaleString(a)," Today"):null)),c.a.createElement("div",{className:"PercentageRow"},c.a.createElement("div",null,c.a.createElement("h4",null,"Active"),c.a.createElement("p",null,o.toLocaleString(a,{style:"percent",maximumFractionDigits:2}))),c.a.createElement("div",null,c.a.createElement("h4",null,"Fatality"),c.a.createElement("p",null,n.toLocaleString(a,{style:"percent",maximumFractionDigits:2}))),c.a.createElement("div",null,c.a.createElement("h4",null,"Recovered"),c.a.createElement("p",null,l.toLocaleString(a,{style:"percent",maximumFractionDigits:2})))),t.updated_at?c.a.createElement("p",{className:"UpdatedAt"},"Last updated at"," ",c.a.createElement("span",null,new Date(t.updated_at).toLocaleString(a,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"}))):null)}catch(r){return null}};var g=function(e){var t=e.data,a=e.locale;try{return c.a.createElement("a",{href:t.url,className:"Article"},c.a.createElement("div",{className:"ArticleInfo".concat(t.urlToImage?"":" no-image")},c.a.createElement("h4",null,t.title),t.description&&!t.description.includes("\ufffd")?c.a.createElement("p",null,t.description):null,t.publishedAt?c.a.createElement("p",{className:"ArticleDate"},new Date(t.publishedAt).toLocaleDateString(a,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})):null),t.urlToImage?c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{className:"ArticleImg",src:t.urlToImage,alt:t.title,onLoad:function(e){e.target.parentNode.lastChild.style.backgroundImage||(e.target.parentNode.firstChild.classList.add("no-image"),e.target.parentNode.lastChild.style.display="none",e.target.style.display="none")},onError:function(e){e.target.parentNode.firstChild.classList.add("no-image"),e.target.parentNode.lastChild.style.display="none",e.target.style.display="none"}}),c.a.createElement("div",{className:"ArticleImgContainer",style:{backgroundImage:"url(".concat(t.urlToImage,")")}})):null)}catch(n){return null}};var y=function(){var e=Object(i.f)(),t=Object(n.useState)(new URLSearchParams(e.location.search).get("country")||""),a=Object(u.a)(t,2),l=a[0],o=a[1],r=Object(n.useState)(null),m=Object(u.a)(r,2),y=m[0],v=m[1],b=Object(n.useState)(!1),O=Object(u.a)(b,2),j=O[0],S=O[1],N=Object(n.useState)(null),L=Object(u.a)(N,2),C=L[0],T=L[1],w=Object(n.useState)([]),U=Object(u.a)(w,2),k=U[0],A=U[1],D=Object(n.useState)([]),F=Object(u.a)(D,2),I=F[0],R=F[1],P=Object(n.useState)(!1),_=Object(u.a)(P,2),B=_[0],x=_[1],H=Object(n.useState)(!1),J=Object(u.a)(H,2),M=J[0],G=J[1],K=Object(n.useState)(!1),V=Object(u.a)(K,2),W=V[0],z=V[1],Y=Object(n.useState)(!1),Z=Object(u.a)(Y,2),$=Z[0],q=Z[1],Q=Object(n.useState)(!1),X=Object(u.a)(Q,2),ee=X[0],te=X[1],ae=Object(n.useState)(null),ne=Object(u.a)(ae,2),ce=ne[0],le=ne[1],oe=Object(n.useState)(!1),re=Object(u.a)(oe,2),ie=re[0],se=re[1];function ue(){var e=f.getCountryByAlpha2(l.toUpperCase());return e&&e.languages&&e.languages[0]||void 0}return Object(n.useEffect)((function(){function t(){T((function(e){return e&&new Date-e>=9e5?(A((function(e){var t,a=Object(s.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;clearTimeout(n)}}catch(c){a.e(c)}finally{a.f()}return e.slice(-3)})),null):(e&&A((function(t){var a,n=Object(s.a)(t);try{for(n.s();!(a=n.n()).done;){var c=a.value;clearTimeout(c)}}catch(l){n.e(l)}finally{n.f()}return t.push(setTimeout((function(){T(null)}),9e5-(new Date-e))),t.slice(-3)})),e)}))}document.addEventListener("scroll",(function(){document.documentElement.scrollHeight-window.innerHeight-document.documentElement.scrollTop<1&&G(!0),t()})),document.addEventListener("mousemove",(function(){t()})),document.addEventListener("visibilitychange",(function(){document.hidden||t()})),window.addEventListener("focus",(function(){t()})),e.listen((function(){"POP"===e.action&&(document.body.classList.remove("Loaded"),setTimeout((function(){o("")}),1e3))})),window.history.scrollRestoration="manual"}),[e]),Object(n.useEffect)((function(){if(v(null),S(!1),T(null),A((function(e){var t,a=Object(s.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;clearTimeout(n)}}catch(c){a.e(c)}finally{a.f()}return e.slice(-3)})),R([]),x(!1),G(!1),z(!1),q(!1),te(!1),le(null),se(!1),!l){var t=new URLSearchParams(e.location.search).get("country");if(t)return void o(t);d.a.get("https://ipapi.co/json").then((function(e){o(e.data.country_code)})).catch((function(e){o("US")}))}}),[l]),Object(n.useEffect)((function(){if(l&&!C){var e,t=Object(s.a)(k);try{for(t.s();!(e=t.n()).done;){var a=e.value;clearTimeout(a)}}catch(n){t.e(n)}finally{t.f()}A((function(e){return e.slice(-3)})),setTimeout((function(){d.a.get("https://corona-api.com/countries/".concat(l)).then((function(e){var t=e.data.data;delete t.timeline,v(t);var a=Math.log2(t.latest_data.deaths/t.population*1e6+1),n=Math.max(140-13.5*a,0);document.documentElement.style.setProperty("--light-accent-color","hsl(".concat(n,", 76%, 60%)")),document.documentElement.style.setProperty("--dark-accent-color","hsl(".concat(n,", 66%, 45%)"))})).catch((function(e){y||(document.documentElement.style.setProperty("--light-accent-color","#eee"),document.documentElement.style.setProperty("--dark-accent-color","black"))})).finally((function(){S(!0),T(new Date);var e,t=Object(s.a)(k);try{for(t.s();!(e=t.n()).done;){var a=e.value;clearTimeout(a)}}catch(n){t.e(n)}finally{t.f()}A((function(e){return e.push(setTimeout((function(){T(null)}),9e5)),e.slice(-3)}))}))}),0)}}),[l,C]),Object(n.useEffect)((function(){if(l&&(M||I.length<1)&&!$&&!W){z(!0),G(!1);var e=Math.ceil(I.length/20)+1;d.a.get("https://newsapi.org/v2/top-headlines?country=".concat(l,"&pageSize=").concat(20,"&page=").concat(e,"&apiKey=").concat("53829b214ce547fcb3d42c19d97038f2"),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){(e.data.articles.length<20||e.data.totalResults<=I.length+e.data.articles.length)&&q(!0),R(I.concat(e.data.articles))})).catch((function(e){q(!0)})).finally((function(){x(!0),z(!1)}))}else G(!1)}),[l,M]),Object(n.useEffect)((function(){setTimeout((function(){j&&B&&document.body.classList.add("Loaded"),se(j&&B)}),0)}),[j,B]),Object(n.useEffect)((function(){if(ie){var e=!y&&l&&!["US","GB","CN","RU","JP"].includes(l.toUpperCase())&&ie;e&&null===ce&&le(5),te(e)}}),[y,l,ie,ce]),Object(n.useEffect)((function(){ee&&5===ce&&(setTimeout((function(){setInterval((function(){le((function(e){return e>1?e-1:1}))}),1e3)}),500),setTimeout((function(){document.body.classList.remove("Loaded"),setTimeout((function(){e.push("./"),o("")}),1e3)}),5e3))}),[ee,ce,e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(h,null),ie?c.a.createElement(c.a.Fragment,null,c.a.createElement(p,{name:y?l&&f.getCountryNameByAlpha2(l.toUpperCase())||y.name:"",resetCountry:function(){document.body.classList.remove("Loaded"),setTimeout((function(){o("")}),1e3)}}),c.a.createElement("main",null,y?c.a.createElement(c.a.Fragment,null,c.a.createElement(E,{data:y,locale:void 0}),c.a.createElement("section",{className:"Articles"},I.map((function(e,t){return c.a.createElement(g,{key:t,data:e,locale:ue()})})),I.length>0&&$?c.a.createElement("h3",{className:"centered AllLoaded"},"All Top Headlines Loaded"):I.length>0&&W?c.a.createElement("h3",{className:"centered AllLoaded"},"Loading More Headlines\u2026"):null)):ee?c.a.createElement("h3",{className:"centered"},"No Statistics Found For"," ",l&&f.getCountryNameByAlpha2(l.toUpperCase())||l.toUpperCase(),". Redirecting in ",ce," Seconds."):c.a.createElement("h3",{className:"centered"},"No Statistics Found For"," ",["United States","United Kingdom","China","Russian Federation","Japan"][["US","GB","CN","RU","JP"].indexOf(l.toUpperCase())]||l,". Please Check Your Connection."))):null)};var v=function(){return c.a.createElement(r.a,null,c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/"},c.a.createElement(y,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.aebb2e2f.chunk.js.map