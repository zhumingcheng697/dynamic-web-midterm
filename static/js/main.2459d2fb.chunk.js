(this.webpackJsonpmidterm=this.webpackJsonpmidterm||[]).push([[0],{35:function(e,t,a){e.exports=a(77)},40:function(e,t,a){},41:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(33),o=a.n(c),r=(a(40),a(9)),i=a(1),s=(a(41),a(3)),u=a(13),m=a.n(u),d=a(14);var E=function(){return l.a.createElement("div",{className:"Loading"},l.a.createElement("div",{className:"LoadingRing"},l.a.createElement("div",{className:"LoadingMask"})),l.a.createElement("h3",{className:"centered"},"Loading..."))};var g=function(e){var t=e.name,a=e.changeCountry;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"Title"},l.a.createElement(r.b,{to:"./",onClick:a},l.a.createElement("h1",null,"COVID ",l.a.createElement("span",null,"|")," Headline")),l.a.createElement("nav",null,l.a.createElement(r.b,{to:"./?country=US",onClick:a},"US"),l.a.createElement(r.b,{to:"./?country=GB",onClick:a},"UK"),l.a.createElement(r.b,{to:"./?country=CN",onClick:a},"China"),l.a.createElement(r.b,{to:"./?country=RU",onClick:a},"Russia"),l.a.createElement(r.b,{to:"./?country=JP",onClick:a},"Japan"))),t?l.a.createElement("h2",{className:"Subtitle"},"Latest COVID\u201119 Statistics and Top Headlines in"," ",l.a.createElement("span",null,t)):l.a.createElement("h2",{className:"Subtitle"},"Latest COVID\u201119 Statistics and Top Headlines"))};var h=function(e){var t=e.data,a=e.locale;if(t){var n=t.latest_data.deaths/t.latest_data.confirmed,c=t.latest_data.recovered/t.latest_data.confirmed,o=1-n-c;return l.a.createElement("section",{className:"Stats"},l.a.createElement("div",{className:"NumberRow"},l.a.createElement("div",null,l.a.createElement("h4",null,"Cases"),l.a.createElement("p",{className:"Total"},t.latest_data.confirmed.toLocaleString(a)," Total"),t.today.confirmed||t.today.deaths?l.a.createElement("p",{className:"Today"},"+",t.today.confirmed.toLocaleString(a)," Today"):null),l.a.createElement("div",null,l.a.createElement("h4",null,"Deaths"),l.a.createElement("p",{className:"Total"},t.latest_data.deaths.toLocaleString(a)," Total"),t.today.confirmed||t.today.deaths?l.a.createElement("p",{className:"Today"},"+",t.today.deaths.toLocaleString(a)," Today"):null)),l.a.createElement("div",{className:"PercentageRow"},l.a.createElement("div",null,l.a.createElement("h4",null,"Active"),l.a.createElement("p",null,o.toLocaleString(a,{style:"percent",maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement("h4",null,"Fatality"),l.a.createElement("p",null,n.toLocaleString(a,{style:"percent",maximumFractionDigits:2}))),l.a.createElement("div",null,l.a.createElement("h4",null,"Recovered"),l.a.createElement("p",null,c.toLocaleString(a,{style:"percent",maximumFractionDigits:2})))),l.a.createElement("p",{className:"UpdatedAt"},"Last updated at"," ",l.a.createElement("span",null,new Date(t.updated_at).toLocaleString(a,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"}))))}return null};var f=function(e){var t=e.data,a=e.locale;return t?l.a.createElement("a",{href:t.url,className:"Article"},l.a.createElement("div",{className:"ArticleInfo".concat(t.urlToImage?"":" no-image")},l.a.createElement("h4",null,t.title),t.description&&!t.description.includes("\ufffd")?l.a.createElement("p",null,t.description):null,l.a.createElement("p",{className:"ArticleDate"},new Date(t.publishedAt).toLocaleDateString(a,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}))),t.urlToImage?l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{className:"ArticleImg",src:t.urlToImage,alt:t.title,onLoad:function(e){e.target.parentNode.lastChild.style.backgroundImage||(e.target.parentNode.firstChild.classList.add("no-image"),e.target.parentNode.lastChild.style.display="none",e.target.style.display="none")},onError:function(e){e.target.parentNode.firstChild.classList.add("no-image"),e.target.parentNode.lastChild.style.display="none",e.target.style.display="none"}}),l.a.createElement("div",{className:"ArticleImgContainer",style:{backgroundImage:"url(".concat(t.urlToImage,")")}})):null):null};var p=function(){var e=Object(i.f)(),t=Object(n.useState)(new URLSearchParams(e.location.search).get("country")||""),a=Object(s.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)(null),u=Object(s.a)(r,2),p=u[0],y=u[1],b=Object(n.useState)(!1),v=Object(s.a)(b,2),N=v[0],O=v[1],S=Object(n.useState)(null),L=Object(s.a)(S,2),j=L[0],C=L[1],T=Object(n.useState)(null),U=Object(s.a)(T,2),w=U[0],k=U[1],A=Object(n.useState)([]),D=Object(s.a)(A,2),F=D[0],I=D[1],P=Object(n.useState)(!1),R=Object(s.a)(P,2),_=R[0],B=R[1],H=Object(n.useState)(!1),J=Object(s.a)(H,2),x=J[0],M=J[1],G=Object(n.useState)(!1),V=Object(s.a)(G,2),K=V[0],W=V[1],Y=Object(n.useState)(!1),Z=Object(s.a)(Y,2),$=Z[0],q=Z[1],z=Object(n.useState)(!1),Q=Object(s.a)(z,2),X=Q[0],ee=Q[1],te=Object(n.useState)(null),ae=Object(s.a)(te,2),ne=ae[0],le=ae[1],ce=Object(n.useState)(!1),oe=Object(s.a)(ce,2),re=oe[0],ie=oe[1];function se(){var e=d.getCountryByAlpha2(c.toUpperCase());return e&&e.languages&&e.languages[0]||void 0}return Object(n.useEffect)((function(){function t(){C((function(e){return e&&new Date-e>=18e5?null:e}))}document.addEventListener("scroll",(function(){document.documentElement.scrollHeight-document.documentElement.clientHeight-document.documentElement.scrollTop<5&&(console.log("load more!"),M(!0)),t()})),document.addEventListener("mousemove",(function(){t()})),document.addEventListener("visibilitychange",(function(){document.hidden||t()})),window.addEventListener("focus",(function(){t()})),e.listen((function(t){"POP"===e.action&&(document.body.classList.remove("Loaded"),setTimeout((function(){o("")}),1e3))}))}),[e]),Object(n.useEffect)((function(){if(y(null),O(!1),C(null),k(null),I([]),B(!1),M(!1),W(!1),q(!1),ee(!1),le(null),ie(!1),!c){var t=new URLSearchParams(e.location.search).get("country");if(t)return void o(t);m.a.get("https://ipapi.co/json").then((function(e){o(e.data.country_code)})).catch((function(e){o("US")}))}}),[c]),Object(n.useEffect)((function(){c&&!j&&(clearTimeout(w),console.log("loading stats",new Date),m.a.get("https://corona-api.com/countries/".concat(c)).then((function(e){var t=e.data.data;delete t.timeline,y(t);var a=Math.log2(t.latest_data.deaths/t.population*1e6+1),n=Math.max(140-13.5*a,0);document.documentElement.style.setProperty("--light-accent-color","hsl(".concat(n,", 76%, 60%)")),document.documentElement.style.setProperty("--dark-accent-color","hsl(".concat(n,", 66%, 45%)"))})).catch((function(e){p||(document.documentElement.style.setProperty("--light-accent-color","#eee"),document.documentElement.style.setProperty("--dark-accent-color","black"))})).finally((function(){O(!0),C(new Date),k(setTimeout((function(){C(null)}),18e5))})))}),[c,j]),Object(n.useEffect)((function(){if(c&&(x||F.length<1)&&!$&&!K){W(!0),M(!1);var e=Math.ceil(F.length/20)+1;console.log(e),m.a.get().then((function(e){(e.data.articles.length<20||e.data.totalResults<=F.length+e.data.articles.length)&&q(!0),I(F.concat(e.data.articles))})).catch((function(e){q(!0)})).finally((function(){B(!0),W(!1)}))}else M(!1)}),[c,x]),Object(n.useEffect)((function(){setTimeout((function(){N&&_&&document.body.classList.add("Loaded"),ie(N&&_)}),0)}),[N,_]),Object(n.useEffect)((function(){if(re){var e=!p&&c&&!["US","GB","CN","RU","JP"].includes(c.toUpperCase())&&re;e&&null===ne&&le(5),ee(e)}}),[p,c,re,ne]),Object(n.useEffect)((function(){X&&5===ne&&(setTimeout((function(){setInterval((function(){le((function(e){return e>1?e-1:1}))}),1e3)}),500),setTimeout((function(){document.body.classList.remove("Loaded"),setTimeout((function(){e.push("./"),o("")}),1e3)}),5e3))}),[X,ne,e]),l.a.createElement(l.a.Fragment,null,l.a.createElement(E,null),re?l.a.createElement(l.a.Fragment,null,l.a.createElement(g,{name:p?c&&d.getCountryNameByAlpha2(c.toUpperCase())||p.name:"",changeCountry:function(){document.body.classList.remove("Loaded"),setTimeout((function(){o("")}),1e3)}}),l.a.createElement("main",null,p?l.a.createElement(l.a.Fragment,null,l.a.createElement(h,{data:p,locale:void 0}),l.a.createElement("section",{className:"Articles"},F.map((function(e,t){return l.a.createElement(f,{key:t,data:e,locale:se()})})),F.length>0&&$?l.a.createElement("h3",{className:"centered AllLoaded"},"All Top Headlines Loaded"):F.length>0&&K?l.a.createElement("h3",{className:"centered AllLoaded"},"Loading More Headlines\u2026"):null)):X?l.a.createElement("h3",{className:"centered"},"No Statistics Found For"," ",c&&d.getCountryNameByAlpha2(c.toUpperCase())||c.toUpperCase(),". Redirecting in ",ne," Seconds."):l.a.createElement("h3",{className:"centered"},"No Statistics Found For"," ",["United States","United Kingdom","China","Russian Federation","Japan"][["US","GB","CN","RU","JP"].indexOf(c.toUpperCase())]||c,". Please Check Your Connection."))):null)};var y=function(){return l.a.createElement(r.a,null,l.a.createElement(i.c,null,l.a.createElement(i.a,{path:"/"},l.a.createElement(p,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.2459d2fb.chunk.js.map